<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" class="no-js"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script><title>Chapter 2. Running CoffeePot</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="https://purl.org/dc/elements/1.1/" rel="schema.dc"/><meta name="dc.modified" content="2023-04-11T17:27:35Z"/><meta name="generator" content="DocBook xslTNG version 2.1.2 / c75a917 / SAXON HE 11.5"/><link href="/css/docbook-toc.css" rel="stylesheet"/><link href="/css/docbook.css" rel="stylesheet" media="screen"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script src="https://kit.fontawesome.com/498b6706f0.js" type="text/javascript" crossorigin="anonymous"></script><link href="icon/CoffeePot.png" rel="shortcut icon"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="css/nineml.css" rel="stylesheet"/><link href="css/coffeepot.css" rel="stylesheet"/><link rel="prev" href="ch01.html"/><link rel="next" href="ch03.html"/><link rel="up" href="index.html"/><link rel="home" href="index.html"/><script src="/js/persistent-toc.js" defer="defer"></script><script src="/js/copy-verbatim.js" defer="defer"></script><script src="/js/chunk-nav.js" defer="defer"></script></head><body><nav class="top"><span class="nav"><a title="CoffeePot" href="index.html"><i class="fas fa-home"></i></a> <a href="ch01.html" title="Chapter  1 .  Installing CoffeePot"><i class="fas fa-arrow-left"></i></a> <a title="CoffeePot" href="index.html"><i class="fas fa-arrow-up"></i></a> <a title="Chapter  3 .  How it works" href="ch03.html"><i class="fas fa-arrow-right"></i></a></span><span class="title"><i class="title">CoffeePot</i></span></nav><main><section id="running" db-chunk="ch02.html" db-id="d92e78" class="chapter component"><header><h2>Chapter <span class="label">2</span><span class="sep">. </span>Running CoffeePot</h2></header><p><span class="application">CoffeePot</span> can be run directly from the jar file
with a command like:</p><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><code class="command">java</code> <code class="option">-jar</code> coffeepot-2.0.0.jar <em class="replaceable">options</em></code></span></span>
</pre></div><p>It may be more convenient, however, to write a small batch file or shell script
to run it with an explicit classpath, <a href="ch06.html" class="xref xref-chapter">Chapter <span class="label">6</span>, Configuration</a>.</p><p>In the examples that follow, we assume that “<code>coffeepot</code>” will run
<span class="application">CoffeePot</span>. Depending on how you’ve installed it, you may have to
substitute <code>java -jar /path/to/coffeepot.jar</code> or some other variation.</p><section id="cli" class="section"><header><h2><span class="label">1</span><span class="sep">. </span>The command line</h2></header><p>Typical usage is:</p><div class="cmdsynopsis"><code class="command">coffeepot</code> <span class="cmdpunct">[</span><span class="arg">--pretty-print</span><span class="cmdpunct">]</span> <span class="cmdpunct">[</span><span class="arg">--parse:<em class="replaceable">number</em></span><span class="cmdpunct">]</span> <span class="cmdpunct">[</span><span class="arg">--grammar:<em class="replaceable">file</em></span><span class="cmdpunct">]</span> <span class="cmdpunct">[</span><span class="arg">--output:<em class="replaceable">file</em></span><span class="cmdpunct">]</span> <span class="cmdpunct">[</span><span class="group"><span class="cmdpunct">[</span><span class="arg">--input:<em class="replaceable">file</em></span><span class="cmdpunct">]</span><span class="cmdpunct"> | </span> <span class="arg"><em class="replaceable">input</em></span><span class="cmdpunct">…</span></span><span class="cmdpunct">]</span></div><p>(For a quick recap of all the possible options, run
<span class="application">CoffeeJar</span> with the <code class="option">--help</code> option.)</p><p>Where:</p><dl class="variablelist"><dt class="varlistentry"><span class="term"><code class="option">--pretty-print</code></span></dt><dd><p>Specifies that XML output should be formatted with line breaks and indentation.
Note: the built-in pretty printer is a little bit crude, especially in the face
of mixed content.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--parse:<em class="replaceable">number</em></code></span></dt><dd><p>Selects a specific parse. If the parse was ambiguous, use this
option to inspect alternate parses. (If the parse wasn’t
ambiguous, there’s only one.) You can also use
<a href="#o.parse-count" class="link">--parse-count</a> to display more than one
parse.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--grammar:<em class="replaceable">file</em></code></span></dt><dd><p>Specifies the input grammar. If unspecified, the Invisible XML specification
grammar is used. The grammar specified may be an Invisible XML grammar in either
the text or XML formats, or a compiled grammar saved with the
<a href="#compiled-grammar-option" class="link">--compiled-grammar option</a>.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--output:<em class="replaceable">file</em></code></span></dt><dd><p>Specifies the output location, defaults to standard output.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--input:<em class="replaceable">file</em></code></span></dt><dd><p>Specifies the input file. If unspecified, the remaining command line arguments
are taken as the input, separated by single spaces.
</p></dd></dl><p>The following additional options are also available:</p><dl class="long-terms variablelist"><dt id="compiled-grammar-option" class="varlistentry"><span class="term"><code class="option">--compiled-grammar:<em class="replaceable">file</em></code></span></dt><dd><p>Specifies that a compiled version of the grammar should be saved to the
specified file.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--describe-ambiguity</code></span></dt><dd><p>Requests a desription of where in the parse forest ambiguity arose.
This option only applies to ambiguous parses.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--format:<em class="replaceable">type</em></code></span></dt><dd><p>Requests a specific format type. Available types are <code>xml</code>,
the default, <code>json</code> or <code>json-data</code>, <code>json-tree</code>
or <code>json-text</code>, or <code>csv</code>.</p><p>The <code>json-data</code> format is only possible for result
trees that contain no mixed content.</p><p>The <code>csv</code> format is only possible for result trees that have a
specific “shape”. The grand-children of the root element must all be atomic values
and no mixed content is allowed.</p></dd><dt class="varlistentry"><span class="term"><code class="option">--graph-svg:<em class="replaceable">file</em></code></span></dt><dd><p>Output an SVG diagram of the parse forest to the file. This option
will only work if GraphViz has <a href="ch06.html" class="link">been configured</a>.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--graph-xml:<em class="replaceable">file</em></code></span></dt><dd><p>Output an XML representation of the structure of the parse forest.
This is intended as the input to visualization processes, like the SVG output.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--log:<em class="replaceable">levels</em></code></span></dt><dd><p>Sets the log level, one of <code class="literal">silent</code>,
<code class="literal">error</code>, <code class="literal">warning</code>,
<code class="literal">info</code>, <code class="literal">debug</code>, or
<code class="literal">trace</code>. It can also set logging at finer granularities
by specifying a list of logger:level pairs, for example:
<code class="literal">CoffeePot:trace,CoffeeGrinder:info,CoffeeFilter:warning</code>.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--no-cache</code></span></dt><dd><p>Ignore the grammar cache. With this option, cached grammars
will neither be loaded nor stored.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--no-output</code></span></dt><dd><p>Suppress output of the parse tree.
</p></dd><dt id="o.parse-count" class="varlistentry"><span class="term"><code class="option">--parse-count:<em class="replaceable">number</em>|all</code></span></dt><dd><p>For an ambiguous parse, you can specify a parse count greater than one
to get several (or <code class="literal">all</code>) the possible parses. It is not an error
if you get multiple parses that have the same XML structure, this simply indicates that the
ambiguity was in some part of the result that wasn’t serialized.
</p><p>No attempt is made to enumerate the infinitely many possible
parses that arise if the resulting parse forest contains a loop.
Consequently, it’s possible to get an “infinitely ambiguous” result
that has only a single parse.</p></dd><dt class="varlistentry"><span class="term"><code class="option">--pedantic</code></span></dt><dd><p>By default, <span class="application">CoffeePot</span> accepts
certain grammar extensions, such as pragmas. With this option,
only grammars strictly conforming to the Invisible XML specification
may be used.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--record-end:<em class="replaceable">regular-expression</em></code></span></dt><dd><p>Specifies that the input should be parsed as a set of records delimited
by the regular expression provided at the end of each record.
(Implies <code class="option">--records</code>.)
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--record-start:<em class="replaceable">regular-expression</em></code></span></dt><dd><p>Specifies that the input should be parsed as a set of records delimited
by the regular expression provided at the start of each record.
(Implies <code class="option">--records</code>.)
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--records</code></span></dt><dd><p>Specifies that the input should be parsed as a set of records. If neither
<code class="option">--record-start</code> or <code class="option">--record-end</code> is provided, the
default separator is the record-ending regular expression “<code>\n</code>”.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--show-chart</code></span></dt><dd><p>Show the state chart used by the parser.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--show-grammar</code></span></dt><dd><p>Show the grammar used by the parser.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--suppress:<em class="replaceable">state:state:…</em></code></span></dt><dd><p>Suppress <code>ixml:state</code> values. The <code>ambiguous</code>
and <code>prefix</code> states can be suppressed.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--time</code></span></dt><dd><p>Enables output of parse timings.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--tree-svg:<em class="replaceable">file</em></code></span></dt><dd><p>Output an SVG diagram of the parse tree to the file. This option
will only work if GraphViz has <a href="ch06.html" class="link">been configured</a>.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--tree-xml:<em class="replaceable">file</em></code></span></dt><dd><p>Output an XML representation of the structure of the parse tree.
This is intended as the input to visualization processes, like the SVG output.
</p></dd><dt class="varlistentry"><span class="term"><code class="option">--version</code></span></dt><dd><p>Display the <span class="application">CoffeePot</span> version number.
</p></dd></dl></section><section id="buildtools" class="section"><header><h2><span class="label">2</span><span class="sep">. </span>In build tools</h2></header><p>The <a href="https://github.com/nineml/HOWTO" class="link">HOWTO</a> repository
contains examples of using <span class="application">CoffeePot</span> in build tools
such as Gradle.</p></section></section></main><nav class="bottom"><div class="navrow"><div class="navleft"><a title="Chapter  1 .  Installing CoffeePot" href="ch01.html"><i class="fas fa-arrow-left"></i></a></div><div class="navmiddle"><a title="CoffeePot" href="index.html"><i class="fas fa-home"></i></a></div><div class="navright"><a title="Chapter  3 .  How it works" href="ch03.html"><i class="fas fa-arrow-right"></i></a></div></div><div class="navrow"><div class="navleft navtitle">Chapter  1 .  Installing CoffeePot</div><div class="navmiddle"><a title="CoffeePot" href="index.html"><i class="fas fa-arrow-up"></i></a></div><div class="navright navtitle">Chapter  3 .  How it works</div></div><div class="infofooter"><span class="copyrightfooter">Copyright © 2022–2023 Norman Walsh.</span></div><nav class="tocopen"></nav><nav class="toc"></nav><!-- Hide ToC details from user agents that don’t support JS --><script type="text/html" class="tocopen"><i class="far fa-book"></i></script><script type="text/html" class="toc"><header><span>Table of Contents</span><span class="close"><i class="far fa-window-close"></i></span><p class="ptoc-search"><input class="ptoc-search" placeholder="Search" style="width: 80%"/></p></header><div db-persistent-toc="persistent-toc.html" db-prefix="">Loading…</div></script></nav></body></html>