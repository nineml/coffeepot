<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" class="no-js"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script><title>Chapter 3. How it works</title><link href="/css/pygments.css" rel="stylesheet"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="https://purl.org/dc/elements/1.1/" rel="schema.dc"/><meta name="dc.modified" content="2023-05-17T18:54:35Z"/><meta name="generator" content="DocBook xslTNG version 2.1.2 / c75a917 / SAXON HE 11.5"/><link href="/css/docbook-toc.css" rel="stylesheet"/><link href="/css/docbook.css" rel="stylesheet" media="screen"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script src="https://kit.fontawesome.com/498b6706f0.js" type="text/javascript" crossorigin="anonymous"></script><link href="icon/CoffeePot.png" rel="shortcut icon"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="css/nineml.css" rel="stylesheet"/><link href="css/coffeepot.css" rel="stylesheet"/><link rel="prev" href="ch02.html"/><link rel="next" href="ch04.html"/><link rel="up" href="index.html"/><link rel="home" href="index.html"/><script src="/js/persistent-toc.js" defer="defer"></script><script src="/js/copy-verbatim.js" defer="defer"></script><script src="/js/chunk-nav.js" defer="defer"></script></head><body><nav class="top"><span class="nav"><a title="CoffeePot" href="index.html"><i class="fas fa-home"></i></a> <a href="ch02.html" title="Chapter  2 .  Running CoffeePot"><i class="fas fa-arrow-left"></i></a> <a title="CoffeePot" href="index.html"><i class="fas fa-arrow-up"></i></a> <a title="Chapter  4 .  Finding errors" href="ch04.html"><i class="fas fa-arrow-right"></i></a></span><span class="title"><i class="title">CoffeePot</i></span></nav><main><section id="how" db-chunk="ch03.html" db-id="d93e429" class="chapter component"><header><h2>Chapter <span class="label">3</span><span class="sep">. </span>How it works</h2></header><p>At the end of the day, parsing an input against an Invisible XML
grammar is really parsing that input against an Earley grammar
constructed to recognize the same set of inputs (sometimes called
“sentences”). When everything works, this is completely concealed.
Unfortunately, when things go wrong,
<span class="application">coffeepot</span> can do little but show you the
underlying grammar.</p><p>You can peek at this directly, even on a successful parse, with the
<code class="option">--show-grammar</code> option.</p><p>The Invisible XML grammar is much more directly expressive than the rules
allowed by the Earley parser. The Earley parser accepts a set of rules that
map nonterminals to a flat sequence of symbols (either terminals or nonterminals).
The underlying grammar has no direct support for optionality or repeatability.
</p><p>In order to support these “higher level” concepts, the parser rewrites the rules
in terms of additional nonterminals. (Some of these rewrites are described
in the <a href="https://invisiblexml.org/ixml-specification.html#hints" class="link">Hints
for Implementors</a> section of the Invisible XML specification.)</p><p>Let’s look at some examples.</p><section id="earleymapping01" class="section"><header><h2><span class="label">3<span class="sep">.</span>1</span><span class="sep">. </span>Mapping a simple rule</h2></header><p>Simple rules, like a match for “aba”, map in a straightforward way.</p><div id="em01" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s: a, b, a .            { match "aba" }</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a: 'a' .</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b: 'b' .</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>1</span><span class="sep">. </span>The Invisible XML grammar</div></header></div><p>The resulting Earley grammar has introduced a new nonterminal “$$” as the start
symbol. This means that all of the grammars will have the same
start symbol, irrespective of the users grammar.</p><div id="em01g" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$$ ⇒ s</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s ⇒ a, b, a</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a ⇒ 'a'</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b ⇒ 'b'</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>2</span><span class="sep">. </span>The Earley grammar</div></header></div></section><section id="earleymapping02" class="section"><header><h2><span class="label">3<span class="sep">.</span>2</span><span class="sep">. </span>Mapping alternatives</h2></header><p>An Invisible XML grammar must have exactly one rule for each nonterminal.
Alternatives must be expressed in that single rule:</p><div id="em02" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s: a, b, a ; b, a, b .  { match "aba" or "bab" }</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a: 'a' .</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b: 'b' .</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>3</span><span class="sep">. </span>The Invisible XML grammar</div></header></div><p>In the Earley grammar, there are no alternatives, but there is no
prohibition on multiple rules for the same nonterminal.</p><div id="em02g" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$$ ⇒ s</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s ⇒ a, b, a</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s ⇒ b, a, b</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a ⇒ 'a'</code></span></span>
<span class="line" db-line="5"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b ⇒ 'b'</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>4</span><span class="sep">. </span>The Earley grammar</div></header></div></section><section id="earleymapping03" class="section"><header><h2><span class="label">3<span class="sep">.</span>3</span><span class="sep">. </span>Mapping “x?”</h2></header><p>Invisible XML uses “?” to express that a symbol is optional.</p><div id="em03" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s: a, b?, a .           { match "aba" or "aa" }</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a: 'a' .</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b: 'b' .</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>5</span><span class="sep">. </span>The Invisible XML grammar</div></header></div><p>Earlier, I said the Earley grammar had no direct support for optionality.
That’s true. But the <code class="package">CoffeeGrinder</code> implementation does allow
a symbol to be marked as optional. This will ultimately get transformed into two
rules (<code>s ⇒ a, b, a</code> and <code>s ⇒ a, a</code>), it’s simply marked
with a question mark in the displayed grammar.</p><div id="em03g" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$$ ⇒ s</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s ⇒ a, b?, a</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a ⇒ 'a'</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b ⇒ 'b'</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>6</span><span class="sep">. </span>The Earley grammar</div></header></div></section><section id="earleymapping03b" class="section"><header><h2><span class="label">3<span class="sep">.</span>4</span><span class="sep">. </span>Mapping “(x1, x2)?”</h2></header><p>Making a group optional <em>does</em> require the introduction
of a new nonterminal. The Earley parser doesn’t know anything about groups.</p><div id="em03b" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s: a, (b, a)? .         { match "aba" or "a" }</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a: 'a' .</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b: 'b' .</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>7</span><span class="sep">. </span>The Invisible XML grammar</div></header></div><p>Most nonterminals are just numeric. A few, like the rewrite for optionality,
include some other description of their purpose. There’s no obvious way to provide
meaningful names for the nonterminals introduced during rewriting. Attempting to decorate
the names of the nonterminals in the original grammar produces much longer names
which have drawbacks of their own.</p><div id="em03bg" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$$ ⇒ s</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s ⇒ a, $1_option?</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a ⇒ 'a'</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b ⇒ 'b'</code></span></span>
<span class="line" db-line="5"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$1_option ⇒ b, a</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>8</span><span class="sep">. </span>The Earley grammar</div></header></div></section><section id="earleymapping04" class="section"><header><h2><span class="label">3<span class="sep">.</span>5</span><span class="sep">. </span>Mapping “x*”</h2></header><p>Invisible XML uses “*” to express that a symbol may be repeated 
zero or more times.</p><div id="em04" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s: a, b*, a .           { match "aa", "aba", "abba", "abbba" ... }</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a: 'a' .</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b: 'b' .</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>9</span><span class="sep">. </span>The Invisible XML grammar</div></header></div><p>This requires a couple of new nonterminals. The superscript “n”
next to <code>$1</code> indicates that it is “nullable”. That is to say,
it is possible for it to match the empty string, sometimes called “ε”.</p><p>Pay particular attention to nullable nonterminals, either your own or
ones introduced by rewriting. The most common source of ambiguity in a grammar is
to allow more than one nonterminal at a particular location to map to ε.</p><div id="em04g" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$$ ⇒ s</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s ⇒ a, $1ⁿ, a</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a ⇒ 'a'</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b ⇒ 'b'</code></span></span>
<span class="line" db-line="5"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$1ⁿ ⇒ $2?</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$2 ⇒ b, $2?</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>10</span><span class="sep">. </span>The Earley grammar</div></header></div></section><section id="earleymapping05" class="section"><header><h2><span class="label">3<span class="sep">.</span>6</span><span class="sep">. </span>Mapping “x+”</h2></header><p>Invisible XML uses “+” to express that a symbol may be repeated 
one or more times.</p><div id="em05" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s: a, b+, a .           { match "aba", "abba", "abbba" ... }</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a: 'a' .</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b: 'b' .</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>11</span><span class="sep">. </span>The Invisible XML grammar</div></header></div><p>This requires three new nonterminals.</p><div id="em05g" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$$ ⇒ s</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s ⇒ a, $1, a</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a ⇒ 'a'</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b ⇒ 'b'</code></span></span>
<span class="line" db-line="5"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$1 ⇒ b, $2ⁿ</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$2ⁿ ⇒ $3?</code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$3 ⇒ b, $2ⁿ</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>12</span><span class="sep">. </span>The Earley grammar</div></header></div></section><section id="earleymapping06" class="section"><header><h2><span class="label">3<span class="sep">.</span>7</span><span class="sep">. </span>Mapping “x1**x2”</h2></header><p>Invisible XML uses “**” between two symbols to indicate
that the first symbol may be repeated zero or more times, separated by
the second. For example, <code>name*','</code> accepts zero or more names
(however they’re defined) separated by commas.</p><p>This is a clever syntactic convenience for authors.</p><div id="em06" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s: a, b**'.', a .        { match "aa", "aba", "ab.ba", "ab.b.ba" ... }</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a: 'a' .</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b: 'b' .</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>13</span><span class="sep">. </span>The Invisible XML grammar</div></header></div><p>It’s a bit of a mess for the Earley grammar.</p><div id="em06g" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$$ ⇒ s</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s ⇒ a, $1ⁿ, a</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a ⇒ 'a'</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b ⇒ 'b'</code></span></span>
<span class="line" db-line="5"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$1ⁿ ⇒ $2?</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$2 ⇒ b, $3ⁿ</code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$3ⁿ ⇒ $4?</code></span></span>
<span class="line" db-line="8"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$4 ⇒ '.', b, $3ⁿ</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>14</span><span class="sep">. </span>The Earley grammar</div></header></div></section><section id="earleymapping07" class="section"><header><h2><span class="label">3<span class="sep">.</span>8</span><span class="sep">. </span>Mapping “x1++x2”</h2></header><p>Invisible XML uses “++” between two symbols to indicate
that the first symbol may be repeated one or more times, separated by
the second.</p><div id="em07" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s: a, b++'.', a .        { match "aba", "ab.ba", "ab.b.ba" ... }</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a: 'a' .</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b: 'b' .</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>15</span><span class="sep">. </span>The Invisible XML grammar</div></header></div><p>Also a bit of a mess for the Earley grammar.</p><div id="em07g" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$$ ⇒ s</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s ⇒ a, $1, a</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a ⇒ 'a'</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b ⇒ 'b'</code></span></span>
<span class="line" db-line="5"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$1 ⇒ b, $2ⁿ</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$2ⁿ ⇒ $3?</code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$3 ⇒ '.', b, $3?</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>16</span><span class="sep">. </span>The Earley grammar</div></header></div></section><section id="earleymapping08" class="section"><header><h2><span class="label">3<span class="sep">.</span>9</span><span class="sep">. </span>Mapping ¯\_(ツ)_/¯</h2></header><p>Of course, the syntax allows these rules to be mixed
more-or-less arbitrarily.</p><div id="em08" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>{ match "a", "aa", "aba", "ab-ba", "ab.ba" ... }</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>s: a+, (b**'-' ; b++'.')?, a* .</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>a: 'a' .</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>b: 'b' .</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>17</span><span class="sep">. </span>The Invisible XML grammar</div></header></div><p>Consequently, real grammars tend to be quite messy. (Not that I’d call this
a real grammar in any useful sense.)</p><div id="em08g" class="example formalobject"><div class="pre-wrap"><pre class="language-none programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$$ ⇒ s</code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>s ⇒ $2, |$1?, $8ⁿ</code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>a ⇒ 'a'</code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>b ⇒ 'b'</code></span></span>
<span class="line" db-line="5"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>|$1 ⇒ $10ⁿ</code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>|$1 ⇒ $5</code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$2 ⇒ a, $3ⁿ</code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$3ⁿ ⇒ $4?</code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$4 ⇒ a, $3ⁿ</code></span></span>
<span class="line" db-line="10"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$5 ⇒ b, $6ⁿ</code></span></span>
<span class="line" db-line="11"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$6ⁿ ⇒ $7?</code></span></span>
<span class="line" db-line="12"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$7 ⇒ '.', b, $7?</code></span></span>
<span class="line" db-line="13"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$8ⁿ ⇒ $9?</code></span></span>
<span class="line" db-line="14"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$9 ⇒ a, $9?</code></span></span>
<span class="line" db-line="15"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$10ⁿ ⇒ $11?</code></span></span>
<span class="line" db-line="16"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$11 ⇒ b, $12ⁿ</code></span></span>
<span class="line" db-line="17"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$12ⁿ ⇒ $13?</code></span></span>
<span class="line" db-line="18"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>$13 ⇒ '-', b, $12ⁿ</code></span></span>
</pre></div><header><div class="title">Example <span class="label">3<span class="sep">.</span>18</span><span class="sep">. </span>The Earley grammar</div></header></div></section><section id="dashetc" class="section"><header><h2><span class="label">3<span class="sep">.</span>10</span><span class="sep">. </span>A word about “-”, “@”, and “^”</h2></header><p>The marks added to the grammar that reflect how (or if) a symbol
should be output have no effect on the rule rewriting. They’re handled as attributes on
the symbols.</p></section><section id="insertions" class="section"><header><h2><span class="label">3<span class="sep">.</span>11</span><span class="sep">. </span>Insertions</h2></header><p>T.B.D.</p></section></section></main><nav class="bottom"><div class="navrow"><div class="navleft"><a title="Chapter  2 .  Running CoffeePot" href="ch02.html"><i class="fas fa-arrow-left"></i></a></div><div class="navmiddle"><a title="CoffeePot" href="index.html"><i class="fas fa-home"></i></a></div><div class="navright"><a title="Chapter  4 .  Finding errors" href="ch04.html"><i class="fas fa-arrow-right"></i></a></div></div><div class="navrow"><div class="navleft navtitle">Chapter  2 .  Running CoffeePot</div><div class="navmiddle"><a title="CoffeePot" href="index.html"><i class="fas fa-arrow-up"></i></a></div><div class="navright navtitle">Chapter  4 .  Finding errors</div></div><div class="infofooter"><span class="copyrightfooter">Copyright © 2022–2023 Norman Walsh.</span></div><nav class="tocopen"></nav><nav class="toc"></nav><!-- Hide ToC details from user agents that don’t support JS --><script type="text/html" class="tocopen"><i class="far fa-book"></i></script><script type="text/html" class="toc"><header><span>Table of Contents</span><span class="close"><i class="far fa-window-close"></i></span><p class="ptoc-search"><input class="ptoc-search" placeholder="Search" style="width: 80%"/></p></header><div db-persistent-toc="persistent-toc.html" db-prefix="">Loading…</div></script></nav></body></html>